{% extends 'baseapp/base.html' %}

{% load static %}

{% block content %}

{% if user.is_authenticated %}
<!--=================================
    Contat Form -->
    <section class="space-ptb">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <div class="section-title text-center">
              {% if employee %}
              <h6>{{ employee }}</h6>              
              <p>Измените данные о сотруднике</p>
              {% else %}
              <h6>Новый сотрудник</h6>              
              <p>Введите данные о сотруднике</p>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="row justify-content-lg-around position-relative pt-5">
          
          <div class="col-lg-7 col-md-7 pr-lg-5">
            <div class="p-4 p-md-5 bg-white shadow">              
              <form class="mt-4" action="{% url 'save-employee' %}" method="post">
                {% csrf_token %}
                <div class="form-group mb-3">
                  {% if employee %}
                  <input type="hidden" class="form-control" name="id" placeholder="id" value="{{ employee.id }}">
                  {% else %}
                  <input type="hidden" class="form-control" name="id" placeholder="id" value="0">
                  {% endif %}
                  <input type="text" class="form-control" name="name" placeholder="Имя" value="{{ employee.name }}">
                </div>                
                
                <div class="form-group mb-3">
                  {% if employee %}
                    <input type="hidden" class="form-control" name="customer_id" placeholder="id" value="{{ employee.customer.id }}">
                    <input type="text" class="form-control" placeholder="Заказчик" value="{{ employee.customer }}" disabled>
                  {% else %}
                    {% if customer %}
                      <input type="hidden" class="form-control" name="customer_id" placeholder="id" value="{{ customer.id }}">
                      <input type="text" class="form-control" placeholder="Заказчик" value="{{ customer }}" disabled>
                    {% else %}
                      <select class="form-control" name="customer_id">
                        {% for customer in customers %}
                        <option value="{{ customer.id }}">
                          {{ customer }}
                        </option>
                        {% endfor %}
                      </select>
                    {% endif %}
                  {% endif %}
                </div>

                <div class="form-group mb-3">
                  
                  <select class="form-control" name="person_id">
                    {% for person in persons %}
                    <option value="{{ person.id }}">
                      {{ person }}
                    </option>
                    {% endfor %}

                    {% if employee %}
                    <option selected value="{{ employee.person.id }}">
                      {{ employee.person }}
                    </option>
                    {% endif %}
                  </select>

                </div>

                <div class="form-group mb-3">
                    

                  <select class="form-control" name="position_id">
                    {% for position in positions %}
                    <option value="{{ position.id }}">
                      {{ position }}
                    </option>
                    {% endfor %}

                    {% if employee %}
                    <option selected value="{{ employee.position.id }}">
                      {{ employee.position }}
                    </option>
                    {% endif %}
                  </select>                                 
                </div>


               
                <div class="form-group mb-3">
                  <input type="text" class="form-control" name="email" placeholder="Email" value="{{ employee.email }}">
                </div>

                <div class="form-group mb-3">                  
                  <input type="text" class="form-control" name="address1" placeholder="Адрес юридический" value="{{ employee.address1 }}">
                </div>
                <div class="form-group mb-3">
                  <input type="text" class="form-control" name="address2" placeholder="Адрес фактический" value="{{ employee.address2 }}">
                </div>

                <div class="form-group mb-3">                  
                  <input type="text" class="form-control" name="phone1" placeholder="Телефон" value="{{ employee.phone1 }}">
                </div>
                <div class="form-group mb-3">
                  <input type="text" class="form-control" name="phone2" placeholder="Телефон" value="{{ employee.phone2 }}">
                </div>

                
                
                <div class="form-group mb-0">
                  <button type="submit" class="btn btn-primary">Сохранить<i class="fas fa-arrow-right pl-3"></i></button>
                </div>
              </form>
            </div>
          </div>
          
        </div>
      </div>
    </section>
    <!--=================================
    Contat Form  -->
{% endif %}

{% endblock %}